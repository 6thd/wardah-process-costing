-- =======================================
-- ุงุฎุชุจุงุฑ ุงูุฏูุงู ุงููุซุจุชุฉ
-- =======================================

-- 1. ุงุฎุชุจุงุฑ get_account_tree - ุนุฑุถ ุดุฌุฑุฉ ุงูุญุณุงุจุงุช
SELECT '๐ ุดุฌุฑุฉ ุญุณุงุจุงุช ุงูุฃุตูู (ASSET):' as test;
SELECT 
    REPEAT('  ', level - 1) || code as ุงูููุฏ_ุจุงููุณุชูู,
    name as ุงูุงุณู,
    level as ุงููุณุชูู
FROM get_account_tree('00000000-0000-0000-0000-000000000001', 'ASSET')
LIMIT 20;

-- 2. ุงุฎุชุจุงุฑ search_accounts - ุงูุจุญุซ ุนู "ููุฏูุฉ"
SELECT '๐ ุงูุจุญุซ ุนู "ููุฏูุฉ":' as test;
SELECT * FROM search_accounts('00000000-0000-0000-0000-000000000001', 'ููุฏูุฉ');

-- 3. ุงุฎุชุจุงุฑ get_account_details - ุชูุงุตูู ุญุณุงุจ ูุญุฏุฏ
SELECT '๐ ุชูุงุตูู ุญุณุงุจ 110102:' as test;
SELECT * FROM get_account_details('00000000-0000-0000-0000-000000000001', '110102');

-- 4. ุงุฎุชุจุงุฑ get_gl_mapping - ุฎุฑูุทุฉ ุญุฏุซ
SELECT '๐บ๏ธ ุฎุฑูุทุฉ ุญุฏุซ "material_issue_mixing":' as test;
SELECT * FROM get_gl_mapping('00000000-0000-0000-0000-000000000001', 'material_issue_mixing');

-- 5. ุนุฏุฏ ุงูุญุณุงุจุงุช ุญุณุจ ุงููุณุชูู
SELECT '๐ ุฅุญุตุงุฆูุงุช ุงููุณุชููุงุช:' as test;
SELECT 
    CASE 
        WHEN parent_code IS NULL THEN 'ุงููุณุชูู 1 (ุฑุฆูุณูุฉ)'
        ELSE 'ุงููุณุชูู 2+ (ูุฑุนูุฉ)'
    END as ุงููุณุชูู,
    COUNT(*) as ุงูุนุฏุฏ
FROM gl_accounts
WHERE org_id = '00000000-0000-0000-0000-000000000001'
GROUP BY CASE WHEN parent_code IS NULL THEN 'ุงููุณุชูู 1 (ุฑุฆูุณูุฉ)' ELSE 'ุงููุณุชูู 2+ (ูุฑุนูุฉ)' END;
