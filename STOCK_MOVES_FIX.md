# ๐ง ุฅุตูุงุญ ุตูุญุฉ Stock Moves

**ุงูุชุงุฑูุฎ:** 10 ููููุจุฑ 2025  
**ุงููุดููุฉ:** ุนุฑุถ ุจูุงูุงุช ุบูุฑ ุตุญูุญุฉ ูู ุตูุญุฉ ุญุฑูุงุช ุงููุฎุฒูู

---

## ๐ ุงููุดุงูู ุงูุชู ุชู ุงูุชุดุงููุง

### 1. **Encoding Issue**
```
โ ุงููุดููุฉ: ุธููุฑ ุฑููุฒ ุบุฑูุจุฉ ูุซู iยฃโฌV/O/iV
โ ุงูุณุจุจ: ุนุฑุถ ุญููู ุบูุฑ ููุฌูุฏุฉ ูู ุงูุฌุฏูู
```

### 2. **ุจููุฉ ุงูุจูุงูุงุช ุบูุฑ ูุชุทุงุจูุฉ**
```typescript
// ุงูููุฏ ุงููุฏูู ูุชููุน:
movement.movement_type  // ูุง ููุฌุฏ ูู stock_ledger_entries
movement.quantity       // ูุง ููุฌุฏุ ุงูุตุญูุญ: actual_qty
movement.created_at     // ูุง ููุฌุฏุ ุงูุตุญูุญ: posting_date

// stock_ledger_entries ุงููุนูู ูุญุชูู ุนูู:
actual_qty              // ุงููููุฉ (+ve ูููุงุฑุฏุ -ve ููุตุงุฏุฑ)
qty_after_transaction   // ุงูุฑุตูุฏ ุจุนุฏ ุงูุญุฑูุฉ
voucher_type            // ููุน ุงููุณุชูุฏ
voucher_number          // ุฑูู ุงููุณุชูุฏ
valuation_rate          // ุณุนุฑ ุงูุชูููู
stock_value             // ุงููููุฉ ุงูุฅุฌูุงููุฉ
posting_date            // ุชุงุฑูุฎ ุงูุชุฑุญูู
```

### 3. **ุนุฏู ุนุฑุถ ูุนูููุงุช ูุงููุฉ**
- ูู ูุนุฑุถ ููุน ุงููุณุชูุฏ (voucher_type)
- ูู ูุนุฑุถ ุงูุฑุตูุฏ ุจุนุฏ ุงูุญุฑูุฉ
- ูู ูุนุฑุถ ุณุนุฑ ุงูุชูููู ูุงููููุฉ

---

## โ ุงูุญููู ุงููุทุจูุฉ

### 1. **ุชุตุญูุญ ูุฑุงุกุฉ ุงูุจูุงูุงุช**
```typescript
// ุชุญุฏูุฏ ุงุชุฌุงู ุงูุญุฑูุฉ ูู actual_qty
const isIncoming = movement.actual_qty > 0
const isOutgoing = movement.actual_qty < 0

// ุนุฑุถ ุงููููุฉ ุงูุตุญูุญุฉ
{isIncoming ? '+' : ''}{movement.actual_qty?.toFixed(2)}
```

### 2. **ุชุฑุฌูุฉ ุฃููุงุน ุงููุณุชูุฏุงุช**
```typescript
const getVoucherTypeAr = (type: string) => {
  const types: Record<string, string> = {
    'Goods Receipt': 'ุงุณุชูุงู ุจุถุงุนุฉ',
    'Delivery Note': 'ุฅุฐู ุชุณููู',
    'Stock Entry': 'ููุฏ ูุฎุฒูู',
    'Material Issue': 'ุตุฑู ููุงุฏ',
    'Material Receipt': 'ุงุณุชูุงู ููุงุฏ',
    'Purchase Receipt': 'ุงุณุชูุงู ูุดุชุฑูุงุช',
    'Sales Return': 'ูุฑุชุฌุน ูุจูุนุงุช',
    'Purchase Return': 'ูุฑุชุฌุน ูุดุชุฑูุงุช',
    'Stock Adjustment': 'ุชุณููุฉ ูุฎุฒูู'
  }
  return types[type] || type
}
```

### 3. **ุชุญุณูู ุงูุนุฑุถ**
```tsx
<div className="text-left shrink-0">
  {/* ุงููููุฉ */}
  <span className="font-bold text-lg">
    {isIncoming ? '+' : ''}{movement.actual_qty?.toFixed(2)}
  </span>
  
  {/* ูุนูููุงุช ุฅุถุงููุฉ */}
  <div className="text-xs space-y-0.5">
    <div>ุงูุฑุตูุฏ: {movement.qty_after_transaction?.toFixed(2)}</div>
    <div>ุงูุชูููู: {movement.valuation_rate?.toFixed(2)} ุฑ.ุณ</div>
    <div>ุงููููุฉ: {movement.stock_value?.toFixed(2)} ุฑ.ุณ</div>
  </div>
  
  {/* ุงูุชุงุฑูุฎ */}
  <div className="text-xs text-muted-foreground">
    {new Date(movement.posting_date).toLocaleDateString('ar-SA')}
  </div>
</div>
```

### 4. **ุฅุถุงูุฉ ุญุงูุฉ Empty State**
```tsx
{movements.length === 0 ? (
  <div className="p-8 text-center text-muted-foreground">
    <p>ูุง ุชูุฌุฏ ุญุฑูุงุช ูุฎุฒูู ุจุนุฏ</p>
  </div>
) : (
  // ุนุฑุถ ุงูุญุฑูุงุช
)}
```

### 5. **ุนุฑุถ ูุนูููุงุช ุฅุถุงููุฉ**
- โ ุฑูู ุงููุณุชูุฏ (voucher_number)
- โ ุฑูู ุงูุฏูุนุฉ (batch_no) ุฅุฐุง ูุฌุฏ
- โ Hover effect ููุชูุงุนู

---

## ๐ ุงูุนุฑุถ ุงูุฌุฏูุฏ

### ูุจู:
```
PS650W470
RM-042
ุชุณููุฉ  iยฃโฌV/O/iV
```

### ุจุนุฏ:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
PS650W470                    +100.00
RM-042                    
ููุฏ ูุฎุฒูู  #PO-001          ุงูุฑุตูุฏ: 100.00
ุฏูุนุฉ: BATCH-001              ุงูุชูููู: 50.00 ุฑ.ุณ
                             ุงููููุฉ: 5,000.00 ุฑ.ุณ
                             12/11/2025
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐จ ุงูุชุญุณููุงุช ุงูุจุตุฑูุฉ

1. **ุฃููุงู ุญุณุจ ููุน ุงูุญุฑูุฉ:**
   - ๐ข ุฃุฎุถุฑ ูููุงุฑุฏ (+)
   - ๐ด ุฃุญูุฑ ููุตุงุฏุฑ (-)
   - ๐ต ุฃุฒุฑู ููุชุณููุงุช

2. **Badges ููููุฉ:**
   - Badge ูููุน ุงููุณุชูุฏ
   - Badge ููุฏูุนุฉ (ุฅุฐุง ูุฌุฏ)

3. **ูุนูููุงุช ููุธูุฉ:**
   - ุงุณู ุงูููุชุฌ + ุงูููุฏ
   - ููุน ุงููุณุชูุฏ + ุฑููู
   - ุงููููุฉ ุจุญุฌู ูุจูุฑ
   - ุชูุงุตูู ุงูุฑุตูุฏ ูุงูุชูููู

4. **Hover Effect:**
   - ุชุธููู ุฎููู ุนูุฏ ุงูุชูุฑูุฑ

---

## ๐ ุงูุชูุงูู ูุน ูุธุงู ุงูุชูููู ุงูุฌุฏูุฏ

ูุฐุง ุงูุชุญุณูู ูุชูุงูู ุชูุงูุงู ูุน ูุธุงู ุงูุชูููู ุงููุชุนุฏุฏ ุงูุทุฑู:

```typescript
// stock_ledger_entries ูุฏุนู:
- valuation_rate    // ุงูุณุนุฑ ุญุณุจ ุงูุทุฑููุฉ (FIFO/LIFO/AVCO)
- stock_queue       // ูุงุฆูุฉ ุงูุฏูุนุงุช (JSONB)
- incoming_rate     // ุณุนุฑ ุงูุงุณุชูุงู
- outgoing_rate     // ุณุนุฑ ุงูุตุฑู
```

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### ูุจู ุงููุดุฑ:
1. โ ุชุญูู ูู ุนุฑุถ ุงูุจูุงูุงุช ุงูุตุญูุญุฉ
2. โ ุชุฃูุฏ ูู ุงูุชุฑุฌูุฉ ุงูุนุฑุจูุฉ
3. โ ุงุฎุชุจุฑ ูุน ุจูุงูุงุช ูุงุฑุฏ/ุตุงุฏุฑ/ุชุณููุฉ
4. โ ุชุญูู ูู Empty State
5. โ ุงุฎุชุจุฑ Responsive design

### ุจุนุฏ ุงููุดุฑ:
```bash
# ุงูุชุญ ุงูุตูุญุฉ
http://localhost:5173/inventory/stock-moves

# ุชุญูู ูู:
1. ุนุฑุถ ุฌููุน ุงูุญุฑูุงุช
2. ุงูุฃููุงู ุตุญูุญุฉ
3. ุงูุฃุฑูุงู ุจุงูุนุฑุจู
4. ุงูุชูุงุฑูุฎ ุจุงููุฌุฑู/ุงููููุงุฏู
```

---

## ๐ ููุงุญุธุงุช ูููุทูุฑูู

### 1. ุงุณุชุฎุฏุงู stock_ledger_entries
```typescript
// โ ุงุณุชุฎุฏู ูุฐู ุงูุญููู:
actual_qty              // +ve ุฃู -ve
qty_after_transaction   // ุงูุฑุตูุฏ
voucher_type            // ููุน ุงููุณุชูุฏ
posting_date            // ุงูุชุงุฑูุฎ
valuation_rate          // ุงูุณุนุฑ
stock_value             // ุงููููุฉ

// โ ูุง ุชุณุชุฎุฏู:
movement_type   // ุบูุฑ ููุฌูุฏ
quantity        // ุบูุฑ ููุฌูุฏ  
created_at      // ุบูุฑ ููุฌูุฏ
```

### 2. ุงูุชุฑุฌูุฉ
ุฌููุน ุฃููุงุน ุงููุณุชูุฏุงุช ููุชุฑุฌูุฉ ูู `getVoucherTypeAr()`

### 3. ุงูุฃุฑูุงู
```typescript
// ุงุณุชุฎุฏู toFixed(2) ููุฃุฑูุงู
movement.actual_qty?.toFixed(2)
movement.valuation_rate?.toFixed(2)
```

---

## ๐ฏ Next Steps

### ููุฑู:
- [ ] ุงุฎุชุจุฑ ุงูุตูุญุฉ ูุน ุจูุงูุงุช ุญููููุฉ
- [ ] ุชุญูู ูู ุงูุฃุฏุงุก ูุน ุจูุงูุงุช ูุซูุฑุฉ
- [ ] ุฃุถู pagination ุฅุฐุง ูุฒู

### ูุตูุฑ ุงููุฏู:
- [ ] ุฃุถู ููุงุชุฑ (ุญุณุจ ุงูููุชุฌุ ุงูุชุงุฑูุฎุ ุงูููุน)
- [ ] ุฃุถู ุฒุฑ Export to Excel
- [ ] ุฃุถู Search

### ุทููู ุงููุฏู:
- [ ] ุชูุงูู ูุน ูุธุงู ุงูุชูููู ุงูุฌุฏูุฏ
- [ ] ุนุฑุถ BatchDetails ููุญุฑูุงุช FIFO/LIFO
- [ ] ุฅุญุตุงุฆูุงุช ูุชูุงุฑูุฑ

---

## โ ุงูุฎูุงุตุฉ

ุชู ุฅุตูุงุญ ุตูุญุฉ Stock Moves ุจูุฌุงุญ:
- โ ุฅุตูุงุญ Encoding issue
- โ ุนุฑุถ ุงูุจูุงูุงุช ุงูุตุญูุญุฉ ูู stock_ledger_entries
- โ ุชุฑุฌูุฉ ุฃููุงุน ุงููุณุชูุฏุงุช
- โ ุชุญุณูู ุงูุนุฑุถ ุงูุจุตุฑู
- โ ุฅุถุงูุฉ ูุนูููุงุช ุงูุฑุตูุฏ ูุงูุชูููู
- โ ูุชูุงูู ูุน ูุธุงู ุงูุชูููู ุงูุฌุฏูุฏ

**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุงุฎุชุจุงุฑ
