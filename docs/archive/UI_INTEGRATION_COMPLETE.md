# โ ุงูุชูุงู ุฑุจุท ุงููุงุฌูุงุช ุจูุงุนุฏุฉ ุงูุจูุงูุงุช

## ๐ ูุง ุชู ุฅูุฌุงุฒู

### 1. ุฅุถุงูุฉ ุฎุฏูุงุช ุฌุฏูุฏุฉ ูู `supabase-service.ts`

ุชู ุฅุถุงูุฉ ุงูุฎุฏูุงุช ุงูุชุงููุฉ ูุฏุนู ุงููุธุงู ุงูุฌุฏูุฏ:

```typescript
// Vendors Service
export const vendorsService = {
  getAll: async () => { ... }
}

// Purchase Orders (NEW)
export const newPurchaseOrdersService = {
  getAll: async () => { ... },
  getById: async (id) => { ... }
}

// Goods Receipts
export const goodsReceiptsService = {
  getAll: async () => { ... }
}

// Sales Invoices (NEW)
export const newSalesInvoicesService = {
  getAll: async () => { ... },
  getById: async (id) => { ... }
}

// Delivery Notes
export const deliveryNotesService = {
  getAll: async () => { ... }
}

// Journal Entries
export const journalEntriesService = {
  getAll: async () => { ... },
  getById: async (id) => { ... }
}

// Trial Balance
export const trialBalanceService = {
  get: async (startDate, endDate) => { ... }
}
```

### 2. ุชุญุฏูุซ ุตูุญุฉ ุฃูุงูุฑ ุงูุดุฑุงุก

**ุงูููู:** `src/features/purchasing/index.tsx`

**ุงูุชุญุฏูุซุงุช:**
- โ ุงุณุชูุฑุงุฏ `newPurchaseOrdersService`
- โ ูุญุงููุฉ ุฌูุจ ุงูุจูุงูุงุช ูู ุงููุธุงู ุงูุฌุฏูุฏ ุฃููุงู
- โ Fallback ูููุธุงู ุงููุฏูู ูู ุญุงูุฉ ุงููุดู
- โ ุนุฑุถ ุชูุตููู ููููุชุฌุงุช ูู ูู ุฃูุฑ ุดุฑุงุก
- โ ุฏุนู ุญุงูุงุช ุฌุฏูุฏุฉ: `DRAFT`, `CONFIRMED`, `APPROVED`, `RECEIVED`, `CANCELLED`
- โ ุนุฑุถ ูุนูููุงุช ุงูููุฑุฏ ูู `vendor.vendor_name`
- โ ุนุฑุถ ุถุฑูุจุฉ ุงููููุฉ ุงููุถุงูุฉ
- โ ุฑุณุงูุฉ ูุงุถุญุฉ ุนูุฏ ุนุฏู ูุฌูุฏ ุจูุงูุงุช

**ุงูุชุญุณููุงุช ุงูุจุตุฑูุฉ:**
```tsx
// ุนุฑุถ ุงูููุชุฌุงุช
{order.purchase_order_lines && (
  <div className="mt-3">
    {order.purchase_order_lines.slice(0, 3).map(line => (
      <Badge>{line.product?.product_name} ({line.quantity} {line.unit})</Badge>
    ))}
  </div>
)}
```

### 3. ุชุญุฏูุซ ุตูุญุฉ ููุงุชูุฑ ุงููุจูุนุงุช

**ุงูููู:** `src/features/sales/index.tsx`

**ุงูุชุญุฏูุซุงุช:**
- โ ุงุณุชูุฑุงุฏ `newSalesInvoicesService`
- โ ูุญุงููุฉ ุฌูุจ ุงูุจูุงูุงุช ูู ุงููุธุงู ุงูุฌุฏูุฏ ุฃููุงู
- โ Fallback ูููุธุงู ุงููุฏูู
- โ ุนุฑุถ ุชูุตููู ููููุชุฌุงุช ูู ูู ูุงุชูุฑุฉ
- โ ุฏุนู ุญุงูุงุช ุฌุฏูุฏุฉ: `DRAFT`, `CONFIRMED`, `DELIVERED`, `PAID`, `CANCELLED`
- โ ุนุฑุถ ูุนูููุงุช ุงูุนููู ูู `customer.customer_name`
- โ ุนุฑุถ ุชุงุฑูุฎ ุงูุงุณุชุญูุงู
- โ ุนุฑุถ ุถุฑูุจุฉ ุงููููุฉ ุงููุถุงูุฉ

### 4. ุชุญุฏูุซ ุตูุญุฉ ุงููููุฏ ุงูููููุฉ

**ุงูููู:** `src/features/accounting/journal-entries/index.tsx`

**ุงูุชุญุฏูุซุงุช:**
- โ ุฌูุจ ุงูุจูุงูุงุช ูู `gl_entries` ุงูุฌุฏูุฏุฉ ุฃููุงู
- โ Fallback ูุฌุฏูู `journal_entries` ุงููุฏูู
- โ ุฌูุจ ุงูุชูุงุตูู ูู `gl_entry_lines` ุฃููุงู
- โ Fallback ูุฌุฏูู `journal_lines` ุงููุฏูู
- โ ุฏุนู ููุง ุงููุธุงููู ุจุดูู ุดูุงู

**ุงูููุฏ:**
```typescript
// Try new gl_entries table first
let query = supabase
  .from('gl_entries')
  .select('*')
  .order('entry_date', { ascending: false });

if (error) {
  // Fallback to old journal_entries
  let oldQuery = supabase
    .from('journal_entries')
    .select('*');
}
```

### 5. ุชุญุฏูุซ ุตูุญุฉ ููุฒุงู ุงููุฑุงุฌุนุฉ

**ุงูููู:** `src/features/accounting/trial-balance/index.tsx`

**ุงูุชุญุฏูุซุงุช:**
- โ ุงุณุชูุฑุงุฏ `trialBalanceService`
- โ ุงุณุชุฎุฏุงู ุงูุฎุฏูุฉ ุงูุฌุฏูุฏุฉ ุฃููุงู
- โ Fallback ูู RPC function
- โ Fallback ููุฌูุจ ุงููุฏูู
- โ ุชุญููู ุงูุจูุงูุงุช ููุตูุบุฉ ุงููุทููุจุฉ ุชููุงุฆูุงู

**ุงูููุฏ:**
```typescript
// Try new service
const data = await trialBalanceService.get(fromDate, asOfDate);

// Convert to expected format
const formattedData = data.map(account => ({
  account_code: account.account_code,
  account_name: account.account_name,
  period_debit: account.debit,
  period_credit: account.credit,
  closing_debit: account.debit - account.credit > 0 ? ... : 0,
  closing_credit: account.credit - account.debit > 0 ? ... : 0
}));
```

## ๐ ุงูุจูุงูุงุช ุงููุชุงุญุฉ ููุงุฎุชุจุงุฑ

ูู ุงุฎุชุจุงุฑ `run-real-test.cjs` ุงููุงุฌุญุ ูุฏูู:

### ุฃูุงูุฑ ุงูุดุฑุงุก
- **PO-1762339582666**
  - ุงูููุฑุฏ: ุดุฑูุฉ ุงูููุงุฏ ุงูุฎุงู ุงููุญุฏูุฏุฉ (V001)
  - ุงูููุชุฌ: pp500 (1000 ูุญุฏุฉ @ 5.20 ุฑูุงู)
  - ุงูุฅุฌูุงูู: 5,980 ุฑูุงู (ุดุงูู ุถุฑูุจุฉ 780 ุฑูุงู)
  - ุงูุญุงูุฉ: ุชู ุงูุงุณุชูุงู

### ููุงุชูุฑ ุงููุจูุนุงุช
- **SI-1762339586516**
  - ุงูุนููู: ูุคุณุณุฉ ุงูุชุฌุงุฑุฉ ุงููุจุฑู (C001)
  - ุงูููุชุฌ: pp500 (300 ูุญุฏุฉ @ 7.00 ุฑูุงู)
  - ุงูุฅุฌูุงูู: 2,415 ุฑูุงู (ุดุงูู ุถุฑูุจุฉ 315 ุฑูุงู)
  - ุงูุญุงูุฉ: ูุคูุฏุฉ

### ุงููููุฏ ุงูููููุฉ (3 ูููุฏ)

**1. ููุฏ ุงูุดุฑุงุก**
```
1110 ุงูููุฏูุฉ                     Dr 1,000
1120 ุงููุฏูููู                    Dr 2,415
1130 ุงููุฎุฒูู                     Dr 5,200
1161 ุถุฑูุจุฉ ุงููููุฉ ุงููุถุงูุฉ - ูุฏุฎูุงุช  Dr 780
2101 ุงูุฏุงุฆููู                             Cr 5,980
2162 ุถุฑูุจุฉ ุงููููุฉ ุงููุถุงูุฉ - ูุฎุฑุฌุงุช        Cr 315
3101 ุฑุฃุณ ุงููุงู                            Cr 1,000
```

**2. ููุฏ ุงููุจูุนุงุช**
```
1120 ุงููุฏูููู                    Dr 2,415
4001 ุงูุฅูุฑุงุฏุงุช                            Cr 2,100
2162 ุถุฑูุจุฉ ุงููููุฉ ุงููุถุงูุฉ - ูุฎุฑุฌุงุช        Cr 315
```

**3. ููุฏ ุชูููุฉ ุงูุจุถุงุนุฉ ุงููุจุงุนุฉ**
```
5001 ุชูููุฉ ุงูุจุถุงุนุฉ ุงููุจุงุนุฉ        Dr 1,560
1130 ุงููุฎุฒูู                              Cr 1,560
```

### ููุฒุงู ุงููุฑุงุฌุนุฉ
- **ุฅุฌูุงูู ุงููุฏูู:** 10,955.00 ุฑูุงู
- **ุฅุฌูุงูู ุงูุฏุงุฆู:** 10,955.00 ุฑูุงู
- **ุงููุฑู:** 0.00 ุฑูุงู โ ูุชูุงุฒู

## ๐ ููููุฉ ุงูุงุฎุชุจุงุฑ

### 1. ุงูุชุญ ุงููุธุงู
```
http://localhost:5174
```

### 2. ุณุฌู ุงูุฏุฎูู
ุงุณุชุฎุฏู ุจูุงูุงุช ุงูุฏุฎูู ุงูููุฌูุฏุฉ ูุฏูู

### 3. ุชููุฏ ุงูุตูุญุงุช

#### ุฃ) ุฃูุงูุฑ ุงูุดุฑุงุก
```
ุงูุดุฑูุท ุงูุฌุงูุจู > Purchasing > Purchase Orders
ุฃู
http://localhost:5174/purchasing/orders
```

**ูุง ูุฌุจ ุฃู ุชุฑุงู:**
- โ ูุงุฆูุฉ ุจุฃูุฑ ุงูุดุฑุงุก PO-1762339582666
- โ ุงุณู ุงูููุฑุฏ: ุดุฑูุฉ ุงูููุงุฏ ุงูุฎุงู ุงููุญุฏูุฏุฉ
- โ ุชุงุฑูุฎ ุงูุฃูุฑ ูุงูุชุณููู
- โ ุงูููุชุฌุงุช: pp500 (1000 kg)
- โ ุงูุฅุฌูุงูู: 5,980.00 ุฑูุงู
- โ ุงูุถุฑูุจุฉ: 780.00 ุฑูุงู

#### ุจ) ููุงุชูุฑ ุงููุจูุนุงุช
```
ุงูุดุฑูุท ุงูุฌุงูุจู > Sales > Invoices
ุฃู
http://localhost:5174/sales/invoices
```

**ูุง ูุฌุจ ุฃู ุชุฑุงู:**
- โ ูุงุฆูุฉ ุจุงููุงุชูุฑุฉ SI-1762339586516
- โ ุงุณู ุงูุนููู: ูุคุณุณุฉ ุงูุชุฌุงุฑุฉ ุงููุจุฑู
- โ ุชุงุฑูุฎ ุงููุงุชูุฑุฉ ูุงูุงุณุชุญูุงู
- โ ุงูููุชุฌุงุช: pp500 (300 kg)
- โ ุงูุฅุฌูุงูู: 2,415.00 ุฑูุงู
- โ ุงูุถุฑูุจุฉ: 315.00 ุฑูุงู

#### ุฌ) ุงููููุฏ ุงูููููุฉ
```
ุงูุดุฑูุท ุงูุฌุงูุจู > General Ledger > Journal Entries
ุฃู
http://localhost:5174/accounting/journal-entries
```

**ูุง ูุฌุจ ุฃู ุชุฑุงู:**
- โ 3 ูููุฏ ููููุฉ
- โ ุฃุฑูุงู ุงููููุฏ (JE-2025-01-0001, JE-2025-01-0002, JE-2025-01-0003)
- โ ุญุงูุฉ: POSTED (ูุฑุญู)
- โ ุฅุฌูุงูู ุงููุฏูู = ุฅุฌูุงูู ุงูุฏุงุฆู

#### ุฏ) ููุฒุงู ุงููุฑุงุฌุนุฉ
```
ุงูุดุฑูุท ุงูุฌุงูุจู > General Ledger > Trial Balance
ุฃู
http://localhost:5174/accounting/trial-balance
```

**ูุง ูุฌุจ ุฃู ุชุฑุงู:**
- โ ูุงุฆูุฉ ุจู 9 ุญุณุงุจุงุช
- โ ุฃุฑุตุฏุฉ ูู ุญุณุงุจ (ูุฏูู / ุฏุงุฆู)
- โ ุงูุฅุฌูุงูู ุงูููู: 10,955.00 = 10,955.00
- โ ูุชูุงุฒู ุชูุงูุงู โ

## ๐ Console Logs ูููุณุงุนุฏุฉ ูู ุงูุชุชุจุน

ุนูุฏ ูุชุญ ูู ุตูุญุฉุ ุฑุงูุจ console logs ูู Developer Tools (F12):

### ุฃูุงูุฑ ุงูุดุฑุงุก
```
โ Loaded from NEW system: [Array of orders]
```

### ููุงุชูุฑ ุงููุจูุนุงุช
```
โ Loaded from NEW sales system: [Array of invoices]
```

### ุงููููุฏ ุงูููููุฉ
```
โ Loaded from gl_entries: [Array of entries]
โ Loaded lines from gl_entry_lines: [Array of lines]
```

### ููุฒุงู ุงููุฑุงุฌุนุฉ
```
โ Loaded from trialBalanceService: [Array of accounts]
```

## โ๏ธ ุฅุฐุง ูู ุชุธูุฑ ุงูุจูุงูุงุช

### ุงุญุชูุงููุฉ 1: ูุดููุฉ ูู ุงูุงุชุตุงู
ุงูุญุต Console (F12) ูุงุจุญุซ ุนู ุฃุฎุทุงุก ุงูุดุจูุฉ

### ุงุญุชูุงููุฉ 2: org_id ูุฎุชููุฉ
ุงูุจูุงูุงุช ูุฑุชุจุทุฉ ุจู `org_id` ูุญุฏุฏ. ุชุฃูุฏ ูู:
1. ุงูู org_id ุงููุณุชุฎุฏู ูู ุงูุชุทุจูู
2. ุงูู org_id ุงูููุฌูุฏ ูู ุงูุจูุงูุงุช

### ุงุญุชูุงููุฉ 3: ุงูุจูุงูุงุช ููุฌูุฏุฉ ุจุงููุนู ููู ุบูุฑ ูุฑุฆูุฉ
ุงูุชุญ Supabase Dashboard โ Table Editor ูุชุญูู:
- `purchase_orders` - ูุฌุจ ุฃู ุชุฑู PO-1762339582666
- `sales_invoices` - ูุฌุจ ุฃู ุชุฑู SI-1762339586516
- `gl_entries` - ูุฌุจ ุฃู ุชุฑู 3 ูููุฏ

## ๐ฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ุชุญุณููุงุช ุงูุนุฑุถ
- โ Hover effects ุนูู ุงูุตููู
- โ ุนุฑุถ Badge ููุญุงูุงุช ุจุฃููุงู ูุฎุชููุฉ
- โ ุนุฑุถ ุฃููููุงุช ุชุนุจูุฑูุฉ ููุชูุงุฑูุฎ
- โ ุฑุณุงุฆู ูุงุถุญุฉ ุนูุฏ ุนุฏู ูุฌูุฏ ุจูุงูุงุช
- โ ุชูุณูู ุฃูุถู ููุฃุฑูุงู ูุงูุนููุงุช

### ูุซุงู ุนูู ุงูุนุฑุถ
```tsx
<div className="p-4 hover:bg-accent/50 transition-colors">
  <h4 className="font-medium text-lg">PO-1762339582666</h4>
  <p className="text-sm text-muted-foreground">ุดุฑูุฉ ุงูููุงุฏ ุงูุฎุงู ุงููุญุฏูุฏุฉ</p>
  
  <div className="flex gap-4 mt-2">
    <span>๐ 05/11/2025</span>
    <span>๐ ุงูุชุณููู: 15/11/2025</span>
  </div>
  
  <div className="mt-3">
    <Badge variant="outline">pp500 (1000 kg)</Badge>
  </div>
  
  <div className="font-bold text-lg text-primary">
    5,980.00 ุฑูุงู
  </div>
  <div className="text-xs text-muted-foreground">
    ุดุงูู ุถุฑูุจุฉ: 780.00 ุฑูุงู
  </div>
</div>
```

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ (ุงุฎุชูุงุฑู)

### 1. ุฅุถุงูุฉ ุฅููุงููุฉ ุฅูุดุงุก ุจูุงูุงุช ุฌุฏูุฏุฉ
ุงูุขู ุงูุจูุงูุงุช ุชูุนุฑุถ ููุท. ูููู ุฅุถุงูุฉ:
- ููุงุฐุฌ ูุฅูุดุงุก ุฃูุงูุฑ ุดุฑุงุก ุฌุฏูุฏุฉ
- ููุงุฐุฌ ูุฅูุดุงุก ููุงุชูุฑ ูุจูุนุงุช ุฌุฏูุฏุฉ
- ูุงุฌูุฉ ูุฅูุดุงุก ูููุฏ ููููุฉ ูุฏููุฉ

### 2. ุฅุถุงูุฉ ุงูุชูุงุฑูุฑ
- ุชูุฑูุฑ ุญุฑูุฉ ุงููุฎุฒูู
- ุชูุฑูุฑ ุงูุฃุฑุจุงุญ ูุงูุฎุณุงุฆุฑ
- ุชูุฑูุฑ ุงููุฑูุฒ ุงููุงูู

### 3. ุฅุถุงูุฉ ููุญุฉ ุชุญูู Dashboard
ุนุฑุถ ููุฎุต ููููุงููุณ ุงูุฑุฆูุณูุฉ:
- ุฅุฌูุงูู ุงููุจูุนุงุช ุงูููู/ุงูุฃุณุจูุน/ุงูุดูุฑ
- ุฅุฌูุงูู ุงููุดุชุฑูุงุช
- ุฑุตูุฏ ุงููุฎุฒูู
- ุงูุฃุฑุจุงุญ ุงูุตุงููุฉ

## โ ุงูุฎูุงุตุฉ

ุชู ุจูุฌุงุญ:
1. โ ุฅุถุงูุฉ 7 ุฎุฏูุงุช ุฌุฏูุฏุฉ ูู `supabase-service.ts`
2. โ ุชุญุฏูุซ 4 ุตูุญุงุช ุฑุฆูุณูุฉ ูุนุฑุถ ุงูุจูุงูุงุช
3. โ ุฏุนู ูู ูู ุงููุธุงู ุงูุฌุฏูุฏ ูุงููุฏูู (Fallback)
4. โ ุชุญุณูู ูุงุฌูุฉ ุงููุณุชุฎุฏู
5. โ ุฌุงูุฒ ููุงุฎุชุจุงุฑ ูุงูุนุฑุถ

**ุงูุขู ุงูุชุญ ุงููุชุตูุญ ุนูู http://localhost:5174 ูุงุณุชูุชุน!** ๐
