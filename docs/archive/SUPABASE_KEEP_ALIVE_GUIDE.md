# ๐ ุญู ูุดููุฉ ุฅููุงู Supabase ุงูุชููุงุฆู
# Keep Supabase Database Active - Setup Guide

## ๐ ุงููุดููุฉ
Supabase Free Tier ุชููู ุงููุดุงุฑูุน ุบูุฑ ุงููุดุทุฉ ุจุนุฏ **7 ุฃูุงู** ูู ุนุฏู ุงูุงุณุชุฎุฏุงู.

## โ ุงูุญู ุงูููุทุจูู
ุงุณุชุฎุฏุงู **GitHub Actions** ูุฅุฑุณุงู ุงุณุชุนูุงูุงุช ุญููููุฉ ูู 5 ุฃูุงู.

---

## ๐ ุฎุทูุงุช ุงูุชูุนูู

### 1๏ธโฃ ุฅุถุงูุฉ Secret ูู GitHub

1. ุงุฐูุจ ุฅูู ูุณุชูุฏุน GitHub ุงูุฎุงุต ุจู
2. ุงุถุบุท ุนูู **Settings** (ุงูุฅุนุฏุงุฏุงุช)
3. ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉุ ุงุฎุชุฑ **Secrets and variables** โ **Actions**
4. ุงุถุบุท **New repository secret**
5. ุฃุฏุฎู:
   - **Name**: `SUPABASE_ANON_KEY`
   - **Value**: ุงูููุชุงุญ ูู Supabase (ูู ููู `.env` ุฃู Dashboard)
6. ุงุถุบุท **Add secret**

### 2๏ธโฃ ุฑูุน ุงููููุงุช ุฅูู GitHub

```bash
git add .github/workflows/keep-supabase-alive.yml
git commit -m "Add Supabase keep-alive workflow"
git push
```

### 3๏ธโฃ ุงูุชุญูู ูู ุงูุชุดุบูู

1. ุงุฐูุจ ุฅูู **Actions** ูู GitHub
2. ูุฌุจ ุฃู ุชุฑู workflow ุงุณูู **Keep Supabase Database Active**
3. ููููู ุชุดุบููู ูุฏููุงู ุจุงูุถุบุท ุนูู **Run workflow**

---

## โ๏ธ ููู ูุนููุ

ุงูู workflow ูุฑุณู **3 ุงุณุชุนูุงูุงุช ุญููููุฉ** ูู 5 ุฃูุงู:

1. **ูุญุต ุฌุฏูู Journals**
   ```sql
   SELECT count(*) FROM journals
   ```

2. **ูุญุต ุฌุฏูู GL Accounts**
   ```sql
   SELECT count(*) FROM gl_accounts LIMIT 1
   ```

3. **ุชุดุบูู ุฏุงูุฉ ููุฒุงู ุงููุฑุงุฌุนุฉ**
   ```sql
   SELECT rpc_get_trial_balance('00000000-0000-0000-0000-000000000001', '2025-12-31')
   ```

ูุฐุง ูุถูู ุฃู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชุชููู **ุทูุจุงุช ูุนููุฉ** ูููุณ ููุท ุฒูุงุฑุฉ ููุฑุงุจุท.

---

## ๐ ุงูุฌุฏูู ุงูุฒููู

```yaml
cron: '0 12 */5 * *'  # ูู 5 ุฃูุงู ุงูุณุงุนุฉ 12 ุธูุฑุงู UTC
```

- **ุชูุฑุงุฑ**: ูู 5 ุฃูุงู
- **ุงูุชูููุช**: 12 ุธูุฑุงู ุจุชูููุช UTC (3 ูุณุงุกู ุจุชูููุช ุงูุณุนูุฏูุฉ)

### ุชุนุฏูู ุงูุชูููุช:
ูุชุบููุฑ ุงูุชูุฑุงุฑุ ุนุฏูู ุงูุณุทุฑ ูู ุงูููู:
- `*/5` = ูู 5 ุฃูุงู
- `*/3` = ูู 3 ุฃูุงู
- `*/7` = ูู 7 ุฃูุงู (ุงูุญุฏ ุงูุฃูุตู ุงูุขูู)

---

## โ ูููุฒุงุช ุงูุญู

- โ **ูุฌุงูู 100%** (GitHub Actions ูุฌุงูู ูููุณุชูุฏุนุงุช ุงูุนุงูุฉ ูุงูุฎุงุตุฉ)
- โ **ุงุณุชุนูุงูุงุช ุญููููุฉ** ุชุญุงูุธ ุนูู ูุดุงุท ุงููุงุนุฏุฉ
- โ **ุชููุงุฆู ุจุงููุงูู** - ูุง ูุญุชุงุฌ ุชุฏุฎู ูุฏูู
- โ **ูููู ุชุดุบููู ูุฏููุงู** ุนูุฏ ุงูุญุงุฌุฉ
- โ **ุณุฌูุงุช ูุงุถุญุฉ** ููุชุงุจุนุฉ ุงูุชูููุฐ

---

## ๐ ูุฑุงูุจุฉ ุงูุฃุฏุงุก

### ููุดุงูุฏุฉ ุขุฎุฑ ุชุดุบูู:
1. ุงุฐูุจ ุฅูู **Actions** ูู GitHub
2. ุงุฎุชุฑ **Keep Supabase Database Active**
3. ุดุงูุฏ ุงูุณุฌูุงุช (logs)

### ุฑุณุงุฆู ุงููุฌุงุญ ุงููุชููุนุฉ:
```
โ Database is active and responding!
โ GL Accounts table is accessible!
โ Trial balance function executed successfully!
๐ Keep-Alive Job Completed Successfully!
```

---

## โ๏ธ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฎุทุฃ 401 (Unauthorized):
- **ุงูุณุจุจ**: `SUPABASE_ANON_KEY` ุบูุฑ ุตุญูุญ
- **ุงูุญู**: ุชุญูู ูู ุงูููุชุงุญ ูู GitHub Secrets

### ุฎุทุฃ 404 (Not Found):
- **ุงูุณุจุจ**: ุงุณู ุงูุฌุฏูู ุฃู ุงูุฏุงูุฉ ุบูุฑ ุตุญูุญ
- **ุงูุญู**: ุชุญูู ูู ุฃุณูุงุก ุงูุฌุฏุงูู ูู Supabase

### ูู ูุชู ุงูุชุดุบูู ุชููุงุฆูุงู:
- **ุงูุณุจุจ**: ุงููุณุชูุฏุน ุฎุงุต ูููุณ ูุฏูู GitHub Actions ููุนูู
- **ุงูุญู**: ุชุฃูุฏ ุฃู Actions ููุนููุฉ ูู ุฅุนุฏุงุฏุงุช ุงููุณุชูุฏุน

---

## ๐ฆ ูููุงุช ุฅุถุงููุฉ (ุงุฎุชูุงุฑู)

### ุญู ุจุฏูู: ุงุณุชุฎุฏุงู Vercel Cron (ูุฌุงูู)

ุฅุฐุง ููุช ุชุณุชุถูู ุงูุชุทุจูู ุนูู Vercelุ ููููู ุงุณุชุฎุฏุงู:

```javascript
// /api/cron/keep-alive.js
export default async function handler(req, res) {
  const response = await fetch(
    'https://uutfztmqvajmsxnrqeiv.supabase.co/rest/v1/journals?select=count',
    {
      headers: {
        'apikey': process.env.SUPABASE_ANON_KEY
      }
    }
  );
  
  return res.json({ status: response.status });
}
```

ุซู ุฃุถู ูู `vercel.json`:
```json
{
  "crons": [{
    "path": "/api/cron/keep-alive",
    "schedule": "0 12 */5 * *"
  }]
}
```

---

## ๐ฏ ุงูุฎูุงุตุฉ

- โ **GitHub Actions ููุนูู** - ูุดุชุบู ุชููุงุฆูุงู ูู 5 ุฃูุงู
- โ **ุงุณุชุนูุงูุงุช ุญููููุฉ** - ุชุญุงูุธ ุนูู ูุดุงุท ุงููุงุนุฏุฉ
- โ **ูุฌุงูู** - ุจุฏูู ุชูููุฉ ุฅุถุงููุฉ
- โ **ููุซูู** - ูุณุชุฎุฏู ูู ุขูุงู ุงููุทูุฑูู

**ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุขู ูุญููุฉ ูู ุงูุฅููุงู ุงูุชููุงุฆู!** ๐

---

## ๐ ูุฑุงุฌุน
- [Supabase Free Tier Limits](https://supabase.com/pricing)
- [GitHub Actions Cron Syntax](https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#schedule)
- [Supabase REST API](https://supabase.com/docs/guides/api)
