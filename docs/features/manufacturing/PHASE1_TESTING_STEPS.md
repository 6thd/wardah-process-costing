# Phase 1 Testing Steps - ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ ุงูุชูุงุนููุฉ

## ๐งช ุงุฎุชุจุงุฑ ุดุงูู ูุฌููุน ุงูููููุงุช

### ๐ ูุจู ุงูุจุฏุก

1. โ ุชุฃูุฏ ูู ุฃู ุงูุชุทุจูู ูุนูู: `npm run dev`
2. โ ุชุฃูุฏ ูู ุชุณุฌูู ุงูุฏุฎูู
3. โ ุงูุชุญ Developer Console (F12) ููุฑุงูุจุฉ ุงูุฃุฎุทุงุก
4. โ ุงูุชุญ Network tab ููุฑุงูุจุฉ ุงูุทูุจุงุช

---

## 1๏ธโฃ ุงุฎุชุจุงุฑ Manufacturing Stages List

### ุงูุฎุทูุงุช:
1. ุงุฐูุจ ุฅูู `/manufacturing/stages`
2. ุชุญูู ูู ุธููุฑ 5 ูุฑุงุญู:
   - MIX - ุงูุฎูุท
   - MOLD - ุงููููุจุฉ
   - ASSEMBLY - ุงูุชุฌููุน
   - QC - ูุฑุงูุจุฉ ุงูุฌูุฏุฉ
   - PACK - ุงูุชุนุจุฆุฉ

### โ ุงููุชูุฌุฉ ุงููุชููุนุฉ:
- โ ุงููุฑุงุญู ุชุธูุฑ ูู ุงูุฌุฏูู
- โ ุงูุชุฑุชูุจ ุตุญูุญ (1, 2, 3, 4, 5)
- โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูู Console

### ๐ ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
```sql
SELECT code, name_ar, order_sequence, is_active 
FROM manufacturing_stages 
WHERE org_id = '00000000-0000-0000-0000-000000000001'
ORDER BY order_sequence;
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:** 5 ุตููู

---

## 2๏ธโฃ ุงุฎุชุจุงุฑ Stage Costing Panel

### Test 2.1: Stage Selection Dropdown

**ุงูุฎุทูุงุช:**
1. ุงุฐูุจ ุฅูู `/manufacturing/process-costing`
2. ุงุจุญุซ ุนู ุญูู "ุงููุฑุญูุฉ"
3. ุงููุฑ ุนูู Dropdown

**โ ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ Dropdown ูุนุฑุถ 5 ูุฑุงุญู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุงููุฑุงุญู ูุฑุชุจุฉ ุญุณุจ `order_sequence`
- โ ูุนุฑุถ: Code - Name (Arabic) - Order

**โ ุฅุฐุง ูุดู:**
- ุชุญูู ูู Console ููุฃุฎุทุงุก
- ุชุญูู ูู ุฃู `useManufacturingStages()` ูุนูู
- ุชุญูู ูู RLS policies

---

### Test 2.2: Apply Labor Time

**ุงูุฎุทูุงุช:**
1. ุงุฎุชุฑ Manufacturing Order ูู ุงููุงุฆูุฉ
2. ุงุฎุชุฑ Stage ูู Dropdown (ูุซูุงู: "MIX - ุงูุฎูุท")
3. ุงุฎุชุฑ Work Center
4. ุฃุฏุฎู:
   - ุณุงุนุงุช ุงูุนูู: `8`
   - ูุนุฏู ุงูุฃุฌุฑ: `50`
5. ุงููุฑ "ุชุณุฌูู ููุช ุงูุนูู"

**โ ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุฑุณุงูุฉ ูุฌุงุญ: "ุชู ุชุณุฌูู ููุช ุงูุนูู: 400.00 ุฑูุงู"
- โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูู Console

**๐ ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
```sql
SELECT 
  mo_id,
  stage_id,
  stage_no,
  hours,
  hourly_rate,
  total_cost,
  created_at
FROM labor_time_logs
WHERE mo_id = '<selected_mo_id>'
ORDER BY created_at DESC
LIMIT 1;
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- `stage_id` = UUID (ููุณ null)
- `hours` = 8
- `hourly_rate` = 50
- `total_cost` = 400

---

### Test 2.3: Apply Overhead

**ุงูุฎุทูุงุช:**
1. (ุจุนุฏ Test 2.2) ุงููุฑ "ุชุทุจูู ุงูุชูุงููู ุบูุฑ ุงููุจุงุดุฑุฉ"
2. ูุฌุจ ุฃู ูุชู ุงูุญุณุงุจ ุชููุงุฆูุงู

**โ ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุฑุณุงูุฉ ูุฌุงุญ: "ุชู ุชุทุจูู ุงูุชูุงููู ุบูุฑ ุงููุจุงุดุฑุฉ: XX.XX ุฑูุงู"
- โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก

**๐ ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
```sql
SELECT 
  mo_id,
  stage_id,
  stage_no,
  overhead_rate,
  total_cost,
  created_at
FROM moh_applied
WHERE mo_id = '<selected_mo_id>'
ORDER BY created_at DESC
LIMIT 1;
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- `stage_id` = UUID (ููุณ null)
- `total_cost` ูุญุณูุจ ุจุดูู ุตุญูุญ

---

### Test 2.4: Calculate Stage Cost

**ุงูุฎุทูุงุช:**
1. ุงุฎุชุฑ Manufacturing Order
2. ุงุฎุชุฑ Stage
3. ุฃุฏุฎู:
   - ุงููููุฉ ุงูุฌูุฏุฉ: `100`
   - ุงููููุฉ ุงููุนูุจุฉ: `5`
   - ุชูููุฉ ุงูููุงุฏ ุงููุจุงุดุฑุฉ: `1000`
4. ุงููุฑ "ุงุญุชุณุงุจ ุชูููุฉ ุงููุฑุญูุฉ"

**โ ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุฑุณุงูุฉ ูุฌุงุญ: "ุชู ุงุญุชุณุงุจ [Stage Name]: XX.XX ุฑูุงู"
- โ ุงูุชูููุฉ ุชุธูุฑ ูู ุฌุฏูู ุงูุชุงุฑูุฎ ุฃุฏูุงู
- โ ุงุณู ุงููุฑุญูุฉ ูุธูุฑ ุจุดูู ุตุญูุญ

**๐ ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
```sql
SELECT 
  sc.*,
  ms.name,
  ms.name_ar,
  ms.code
FROM stage_costs sc
LEFT JOIN manufacturing_stages ms ON sc.stage_id = ms.id
WHERE sc.manufacturing_order_id = '<selected_mo_id>'
ORDER BY sc.created_at DESC
LIMIT 1;
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- `stage_id` = UUID (ููุณ null)
- `total_cost` = material_cost + labor_cost + overhead_cost
- `unit_cost` = total_cost / good_quantity
- ุงุณู ุงููุฑุญูุฉ ูุธูุฑ ูู ุงููุชุงุฆุฌ

---

## 3๏ธโฃ ุงุฎุชุจุงุฑ Equivalent Units Dashboard

### Test 3.1: Stage Selection

**ุงูุฎุทูุงุช:**
1. ุงุฐูุจ ุฅูู `/manufacturing/process-costing`
2. ุงูุชูู ุฅูู ุชุจููุจ "Equivalent Units"
3. ุงุจุญุซ ุนู ุญูู "Stage"

**โ ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ Dropdown ูุนุฑุถ ูุฑุงุญู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (ููุณ hardcoded)
- โ ููุณ 5 ูุฑุงุญู ูู Test 1

---

### Test 3.2: Calculate Equivalent Units

**ุงูุฎุทูุงุช:**
1. ุงุฎุชุฑ Manufacturing Order
2. ุงุฎุชุฑ Stage ูู Dropdown
3. ุฃุฏุฎู:
   - Beginning WIP: `10`
   - Units Started: `100`
   - Units Completed: `90`
   - Ending WIP: `20`
   - Material Completion: `100%`
   - Conversion Completion: `50%`
4. ุงููุฑ "Calculate Equivalent Units"

**โ ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุงูุญุณุงุจุงุช ุชุนูู ุจุดูู ุตุญูุญ
- โ ุงููุชุงุฆุฌ ุชุธูุฑ
- โ ุงุณู ุงููุฑุญูุฉ ูุธูุฑ ูู ุงููุชุงุฆุฌ

---

## 4๏ธโฃ ุงุฎุชุจุงุฑ WIP Log UI

### Test 4.1: Access Page

**ุงูุฎุทูุงุช:**
1. ุงุฐูุจ ุฅูู `/manufacturing/wip-log`
2. ุฃู ุงููุฑ "ุณุฌูุงุช WIP" ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ

**โ ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุงูุตูุญุฉ ุชูุชุญ ุจุฏูู ุฃุฎุทุงุก
- โ ุงูุนููุงู: "ุณุฌูุงุช ุงูุนูู ููุฏ ุงูุชูููุฐ (WIP Log)"
- โ ูุณู ุงูุชุตููุฉ ุธุงูุฑ
- โ ุงูุฌุฏูู ุธุงูุฑ (ูุฏ ูููู ูุงุฑุบุงู)

---

### Test 4.2: Filter by Manufacturing Order

**ุงูุฎุทูุงุช:**
1. ูู dropdown "ุฃูุฑ ุงูุชุตููุน"ุ ุงุฎุชุฑ ุฃูุฑ
2. ุงูุชุธุฑ ุชุญููู ุงูุจูุงูุงุช

**โ ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุงูุฌุฏูู ูุนุฑุถ ููุท ุณุฌูุงุช WIP ููุฃูุฑ ุงููุญุฏุฏ
- โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูู Console

---

### Test 4.3: Filter by Stage

**ุงูุฎุทูุงุช:**
1. ูู dropdown "ุงููุฑุญูุฉ"ุ ุงุฎุชุฑ ูุฑุญูุฉ
2. ุงูุชุธุฑ ุชุญููู ุงูุจูุงูุงุช

**โ ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุงูุฌุฏูู ูุนุฑุถ ููุท ุณุฌูุงุช WIP ูููุฑุญูุฉ ุงููุญุฏุฏุฉ
- โ ุงุณู ุงููุฑุญูุฉ ูุธูุฑ ุจุดูู ุตุญูุญ ูู ุงูุฌุฏูู

---

### Test 4.4: Filter by Date Range

**ุงูุฎุทูุงุช:**
1. ุงุฎุชุฑ "ูู ุชุงุฑูุฎ"
2. ุงุฎุชุฑ "ุฅูู ุชุงุฑูุฎ"
3. ุงูุชุธุฑ ุชุญููู ุงูุจูุงูุงุช

**โ ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุงูุฌุฏูู ูุนุฑุถ ููุท ุณุฌูุงุช WIP ุถูู ุงููุทุงู ุงูุฒููู
- โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก

---

## 5๏ธโฃ ุงุฎุชุจุงุฑ Standard Costs UI

### Test 5.1: Access Page

**ุงูุฎุทูุงุช:**
1. ุงุฐูุจ ุฅูู `/manufacturing/standard-costs`
2. ุฃู ุงููุฑ "ุงูุชูุงููู ุงูููุงุณูุฉ" ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ

**โ ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุงูุตูุญุฉ ุชูุชุญ ุจุฏูู ุฃุฎุทุงุก
- โ ุงูุนููุงู: "ุงูุชูุงููู ุงูููุงุณูุฉ"
- โ ูุณู ุงูุชุตููุฉ ุธุงูุฑ
- โ ุงูุฌุฏูู ุธุงูุฑ (ูุฏ ูููู ูุงุฑุบุงู)

---

### Test 5.2: Create Standard Cost

**ุงูุฎุทูุงุช:**
1. ุงููุฑ "ุฅุถุงูุฉ ุชูููุฉ ููุงุณูุฉ"
2. ุงููุฃ ุงููููุฐุฌ:
   - ุงูููุชุฌ: ุงุฎุชุฑ ููุชุฌ
   - ุงููุฑุญูุฉ: ุงุฎุชุฑ ูุฑุญูุฉ (ูุซูุงู: MIX)
   - ุชูููุฉ ุงูููุงุฏ ููู ูุญุฏุฉ: `10`
   - ุชูููุฉ ุงูุนูุงูุฉ ููู ูุญุฏุฉ: `5`
   - ุชูููุฉ ุงููุตุฑููุงุช ููู ูุญุฏุฉ: `3`
   - ุชุงุฑูุฎ ุงูุณุฑูุงู ูู: ุชุงุฑูุฎ ุงูููู
3. ุงููุฑ "ุฅูุดุงุก"

**โ ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุฑุณุงูุฉ ูุฌุงุญ: "ุชู ุฅูุดุงุก ุงูุชูููุฉ ุงูููุงุณูุฉ ุจูุฌุงุญ"
- โ ุงูุชูููุฉ ุชุธูุฑ ูู ุงูุฌุฏูู
- โ ุงูุฅุฌูุงูู = 18 (10 + 5 + 3)

**๐ ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
```sql
SELECT 
  sc.*,
  p.code as product_code,
  p.name_ar as product_name,
  ms.code as stage_code,
  ms.name_ar as stage_name
FROM standard_costs sc
LEFT JOIN products p ON sc.product_id = p.id
LEFT JOIN manufacturing_stages ms ON sc.stage_id = ms.id
WHERE sc.org_id = '00000000-0000-0000-0000-000000000001'
ORDER BY sc.created_at DESC
LIMIT 1;
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- `product_id` = UUID ุงูููุชุฌ ุงููุญุฏุฏ
- `stage_id` = UUID ุงููุฑุญูุฉ ุงููุญุฏุฏุฉ
- `material_cost_per_unit` = 10
- `labor_cost_per_unit` = 5
- `overhead_cost_per_unit` = 3
- `is_active` = true

---

### Test 5.3: Filter Standard Costs

**ุงูุฎุทูุงุช:**
1. ูู dropdown "ุงูููุชุฌ"ุ ุงุฎุชุฑ ููุชุฌ
2. ูู dropdown "ุงููุฑุญูุฉ"ุ ุงุฎุชุฑ ูุฑุญูุฉ
3. ูู dropdown "ุงูุญุงูุฉ"ุ ุงุฎุชุฑ "ูุดุท"

**โ ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุงูุฌุฏูู ูุนุฑุถ ููุท ุงูุชูุงููู ุงููุทุงุจูุฉ ููุชุตููุฉ
- โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก

---

### Test 5.4: Edit Standard Cost

**ุงูุฎุทูุงุช:**
1. ุงููุฑ ุฃููููุฉ "ุชุนุฏูู" ุนูู ุฃู ุชูููุฉ ููุงุณูุฉ
2. ุนุฏูู ุงูููู
3. ุงููุฑ "ุชุญุฏูุซ"

**โ ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุฑุณุงูุฉ ูุฌุงุญ: "ุชู ุชุญุฏูุซ ุงูุชูููุฉ ุงูููุงุณูุฉ ุจูุฌุงุญ"
- โ ุงูููู ุงููุญุฏุซุฉ ุชุธูุฑ ูู ุงูุฌุฏูู

---

### Test 5.5: Delete Standard Cost

**ุงูุฎุทูุงุช:**
1. ุงููุฑ ุฃููููุฉ "ุญุฐู" ุนูู ุฃู ุชูููุฉ ููุงุณูุฉ
2. ุฃูุฏ ุงูุญุฐู

**โ ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุฑุณุงูุฉ ูุฌุงุญ: "ุชู ุญุฐู ุงูุชูููุฉ ุงูููุงุณูุฉ ุจูุฌุงุญ"
- โ ุงูุชูููุฉ ุชุฎุชูู ูู ุงูุฌุฏูู (ุฃู ุชุตุจุญ ุบูุฑ ูุดุทุฉ)

**๐ ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
```sql
SELECT is_active 
FROM standard_costs 
WHERE id = '<deleted_cost_id>';
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- `is_active` = false (soft delete)

---

## ๐ Checklist - ูุงุฆูุฉ ุงูุชุญูู

### Manufacturing Stages:
- [ ] ุงููุฑุงุญู ุชุธูุฑ ูู ุงููุงุฆูุฉ
- [ ] ุงูุชุฑุชูุจ ุตุญูุญ
- [ ] ูุง ุชูุฌุฏ ุฃุฎุทุงุก

### Stage Costing Panel:
- [ ] Dropdown ุงููุฑุงุญู ูุนูู
- [ ] Apply Labor Time ูุนูู
- [ ] Apply Overhead ูุนูู
- [ ] Calculate Stage Cost ูุนูู
- [ ] ุงูุจูุงูุงุช ุชูุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- [ ] `stage_id` ููุฌูุฏ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### Equivalent Units Dashboard:
- [ ] Dropdown ุงููุฑุงุญู ูุนูู
- [ ] ุงูุญุณุงุจุงุช ุชุนูู ุจุดูู ุตุญูุญ

### WIP Log UI:
- [ ] ุงูุตูุญุฉ ุชูุชุญ ุจุฏูู ุฃุฎุทุงุก
- [ ] ุงูุชุตููุฉ ุชุนูู
- [ ] ุงูุจูุงูุงุช ุชุธูุฑ ุจุดูู ุตุญูุญ

### Standard Costs UI:
- [ ] ุงูุตูุญุฉ ุชูุชุญ ุจุฏูู ุฃุฎุทุงุก
- [ ] Create ูุนูู
- [ ] Edit ูุนูู
- [ ] Delete ูุนูู
- [ ] ุงูุชุตููุฉ ุชุนูู
- [ ] ุงูุจูุงูุงุช ุชูุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

---

## ๐ Troubleshooting - ุญู ุงููุดุงูู

### ุงููุดููุฉ: ุงููุฑุงุญู ูุง ุชุธูุฑ ูู Dropdown
**ุงูุญู:**
1. ุชุญูู ูู Console ููุฃุฎุทุงุก
2. ุชุญูู ูู RLS policies:
   ```sql
   -- Run this in Supabase SQL Editor
   SELECT * FROM pg_policies WHERE tablename = 'manufacturing_stages';
   ```
3. ุฅุฐุง ูุฒู ุงูุฃูุฑุ ุดุบูู: `sql/migrations/30_fix_rls_allow_default_org.sql`

### ุงููุดููุฉ: `stage_id` ูู null ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
**ุงูุญู:**
1. ุชุญูู ูู ุฃู Dropdown ูุณุชุฎุฏู `stageId` (ููุณ `stageNumber`)
2. ุชุญูู ูู `process-costing-service.ts`
3. ุชุญูู ูู ุฃู ุงูุจูุงูุงุช ุชููุฑุฑ ุจุดูู ุตุญูุญ

### ุงููุดููุฉ: WIP Log ูุง ูุนุฑุถ ุจูุงูุงุช
**ุงูุญู:**
1. ุชุญูู ูู ูุฌูุฏ ุจูุงูุงุช ูู `stage_wip_log`:
   ```sql
   SELECT COUNT(*) FROM stage_wip_log;
   ```
2. ุชุญูู ูู RLS policies
3. ุชุญูู ูู ุฃู ุงูุชุตููุฉ ููุณุช ูููุฏุฉ ุฌุฏุงู

### ุงููุดููุฉ: Standard Costs ูุง ุชุนูู
**ุงูุญู:**
1. ุชุญูู ูู ูุฌูุฏ ููุชุฌุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
   ```sql
   SELECT COUNT(*) FROM products;
   ```
2. ุชุญูู ูู Console ููุฃุฎุทุงุก
3. ุชุญูู ูู RLS policies

---

## โ Success Criteria - ูุนุงููุฑ ุงููุฌุงุญ

### ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ูุฌุจ ุฃู ุชูุฑ:
- โ Stage Costing Panel: ุฌููุน ุงูุงุฎุชุจุงุฑุงุช 4/4
- โ Equivalent Units Dashboard: ุฌููุน ุงูุงุฎุชุจุงุฑุงุช 2/2
- โ WIP Log UI: ุฌููุน ุงูุงุฎุชุจุงุฑุงุช 4/4
- โ Standard Costs UI: ุฌููุน ุงูุงุฎุชุจุงุฑุงุช 5/5

### ุงููุชูุฌุฉ ุงูุฅุฌูุงููุฉ:
**15/15 ุงุฎุชุจุงุฑ = 100% โ**

---

## ๐ Test Results Template

```
Date: ___________
Tester: ___________

Manufacturing Stages:
- [ ] Test 1: PASS/FAIL

Stage Costing Panel:
- [ ] Test 2.1: PASS/FAIL
- [ ] Test 2.2: PASS/FAIL
- [ ] Test 2.3: PASS/FAIL
- [ ] Test 2.4: PASS/FAIL

Equivalent Units Dashboard:
- [ ] Test 3.1: PASS/FAIL
- [ ] Test 3.2: PASS/FAIL

WIP Log UI:
- [ ] Test 4.1: PASS/FAIL
- [ ] Test 4.2: PASS/FAIL
- [ ] Test 4.3: PASS/FAIL
- [ ] Test 4.4: PASS/FAIL

Standard Costs UI:
- [ ] Test 5.1: PASS/FAIL
- [ ] Test 5.2: PASS/FAIL
- [ ] Test 5.3: PASS/FAIL
- [ ] Test 5.4: PASS/FAIL
- [ ] Test 5.5: PASS/FAIL

Total: ___/15

Notes:
_________________________________________________
_________________________________________________
```

---

**Last Updated:** [Date]  
**Status:** Ready for Testing

