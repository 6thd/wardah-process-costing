# ูุธุงู ุณูุฏุงุช ุงููุจุถ ูุงูุตุฑู - Payment Vouchers System

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ุงุญุชุฑุงูู ูุฅุฏุงุฑุฉ ุณูุฏุงุช ุงููุจุถ ูู ุงูุนููุงุก ูุณูุฏุงุช ุงูุตุฑู ููููุฑุฏูู ูุน ุชูุงูู ูุงูู ูุน ุงููุญุงุณุจุฉ.

## โจ ุงูููุฒุงุช

### ุณูุฏุงุช ุงููุจุถ (Customer Receipts)
- โ ุฅูุดุงุก ุณูุฏุงุช ูุจุถ ููุนููุงุก
- โ ุชูุฒูุน ุงููุจูุบ ุนูู ุนุฏุฉ ููุงุชูุฑ
- โ ุทุฑู ุณุฏุงุฏ ูุชุนุฏุฏุฉ (ููุฏูุ ุชุญููู ุจูููุ ุดููุ ุฅูุฎ)
- โ ุฑุจุท ูุน ุญุณุงุจุงุช ุงูุจููู ูุงูููุฏูุฉ
- โ ุนูุณ ุชููุงุฆู ูู ุงููุญุงุณุจุฉ
- โ ุญุงูุฉ ุงูุณูุฏ (ูุณูุฏุฉุ ููุฑุฑุ ููุบู)

### ุณูุฏุงุช ุงูุตุฑู (Supplier Payments)
- โ ุฅูุดุงุก ุณูุฏุงุช ุตุฑู ููููุฑุฏูู
- โ ุชูุฒูุน ุงููุจูุบ ุนูู ุนุฏุฉ ููุงุชูุฑ
- โ ุทุฑู ุณุฏุงุฏ ูุชุนุฏุฏุฉ
- โ ุฑุจุท ูุน ุญุณุงุจุงุช ุงูุจููู ูุงูููุฏูุฉ
- โ ุนูุณ ุชููุงุฆู ูู ุงููุญุงุณุจุฉ
- โ ุญุงูุฉ ุงูุณูุฏ (ูุณูุฏุฉุ ููุฑุฑุ ููุบู)

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุชูููุฐ ููู SQL

1. ุงูุชุญ Supabase Dashboard
2. ุงุฐูุจ ุฅูู **SQL Editor**
3. ุงูุณุฎ ูุญุชูู `sql/09_payment_vouchers_system.sql`
4. ุงูุตู ูู SQL Editor ูุงุถุบุท **Run**

### 2. ุงููุตูู ุฅูู ุงููุธุงู

#### ุณูุฏุงุช ุงููุจุถ:
- ุงุฐูุจ ุฅูู **ุงููุจูุนุงุช** โ **ุณูุฏุงุช ุงููุจุถ** ุฃู **ุงูุชุญุตููุงุช**
- ุฃู ูุจุงุดุฑุฉ: `/sales/receipts` ุฃู `/sales/collections`

#### ุณูุฏุงุช ุงูุตุฑู:
- ุงุฐูุจ ุฅูู **ุงููุดุชุฑูุงุช** โ **ุณูุฏุงุช ุงูุตุฑู**
- ุฃู ูุจุงุดุฑุฉ: `/purchasing/payments`

## ๐ง ุงููููุงุช ุงูููุดุฃุฉ

### SQL Schema
- `sql/09_payment_vouchers_system.sql` - ุฌุฏุงูู ุณูุฏุงุช ุงููุจุถ ูุงูุตุฑู

### Service Layer
- `src/services/payment-vouchers-service.ts` - ุฌููุน ุงููุธุงุฆู ุงูุฎูููุฉ

### UI Components
- `src/features/sales/components/CustomerReceipts.tsx` - ูุงุฌูุฉ ุณูุฏุงุช ุงููุจุถ
- `src/features/purchasing/components/SupplierPayments.tsx` - ูุงุฌูุฉ ุณูุฏุงุช ุงูุตุฑู

## ๐ ุงูุฌุฏุงูู ุงูููุดุฃุฉ

### customer_collections (ูุญุณูู)
- ุฅุถุงูุฉ `payment_account_id` - ุฑุจุท ูุน ุญุณุงุจ GL
- ุฅุถุงูุฉ `status` - ุญุงูุฉ ุงูุณูุฏ
- ุฅุถุงูุฉ `posted_at`, `posted_by` - ุชุชุจุน ุงูุฅูุฑุงุฑ

### supplier_payments (ุฌุฏูุฏ)
- ุฌุฏูู ูุงูู ูุณูุฏุงุช ุงูุตุฑู
- ุฑุจุท ูุน ุงูููุฑุฏูู ูุงูููุงุชูุฑ
- ุฑุจุท ูุน ุญุณุงุจุงุช GL

### customer_collection_lines (ุฌุฏูุฏ)
- ุจููุฏ ุชูุฒูุน ุงููุจูุบ ุนูู ุงูููุงุชูุฑ
- ุฎุตููุงุช ุนูู ูู ูุงุชูุฑุฉ

### supplier_payment_lines (ุฌุฏูุฏ)
- ุจููุฏ ุชูุฒูุน ุงููุจูุบ ุนูู ุงูููุงุชูุฑ
- ุฎุตููุงุช ุนูู ูู ูุงุชูุฑุฉ

## ๐ ุณูุฑ ุงูุนูู (Workflow)

### ุณูุฏ ุงููุจุถ:
1. **ุฅูุดุงุก ุงูุณูุฏ** (ูุณูุฏุฉ)
   - ุงุฎุชูุงุฑ ุงูุนููู
   - ุชุญุฏูุฏ ุงููุจูุบ
   - ุงุฎุชูุงุฑ ุทุฑููุฉ ุงูุณุฏุงุฏ
   - ุงุฎุชูุงุฑ ุญุณุงุจ ุงูุณุฏุงุฏ (ููุฏู/ุจููู)
   - ุชูุฒูุน ุงููุจูุบ ุนูู ุงูููุงุชูุฑ (ุงุฎุชูุงุฑู)

2. **ุฅูุฑุงุฑ ุงูุณูุฏ**
   - ุชุญุฏูุซ `paid_amount` ูู ุงูููุงุชูุฑ
   - ุชุญุฏูุซ `payment_status` ูู ุงูููุงุชูุฑ
   - ุฅูุดุงุก ููุฏ ูุญุงุณุจู ุชููุงุฆู:
     - ูุฏูู: ุญุณุงุจ ุงูููุฏ/ุงูุจูู
     - ุฏุงุฆู: ุญุณุงุจ ุงูุนููุงุก (Accounts Receivable)

### ุณูุฏ ุงูุตุฑู:
1. **ุฅูุดุงุก ุงูุณูุฏ** (ูุณูุฏุฉ)
   - ุงุฎุชูุงุฑ ุงูููุฑุฏ
   - ุชุญุฏูุฏ ุงููุจูุบ
   - ุงุฎุชูุงุฑ ุทุฑููุฉ ุงูุณุฏุงุฏ
   - ุงุฎุชูุงุฑ ุญุณุงุจ ุงูุณุฏุงุฏ (ููุฏู/ุจููู)
   - ุชูุฒูุน ุงููุจูุบ ุนูู ุงูููุงุชูุฑ (ุงุฎุชูุงุฑู)

2. **ุฅูุฑุงุฑ ุงูุณูุฏ**
   - ุชุญุฏูุซ `paid_amount` ูู ุงูููุงุชูุฑ
   - ุชุญุฏูุซ `status` ูู ุงูููุงุชูุฑ
   - ุฅูุดุงุก ููุฏ ูุญุงุณุจู ุชููุงุฆู:
     - ูุฏูู: ุญุณุงุจ ุงูููุฑุฏูู (Accounts Payable)
     - ุฏุงุฆู: ุญุณุงุจ ุงูููุฏ/ุงูุจูู

## ๐ฐ ุทุฑู ุงูุณุฏุงุฏ ุงููุฏุนููุฉ

- **ููุฏู** (cash)
- **ุชุญููู ุจููู** (bank_transfer)
- **ุดูู** (check) - ูุน ุชูุงุตูู ุงูุดูู
- **ุจุทุงูุฉ ุงุฆุชูุงู** (credit_card)
- **ุจุทุงูุฉ ุฎุตู** (debit_card)
- **ุฏูุน ุฅููุชุฑููู** (online_payment)
- **ุฏูุน ูุญููู** (mobile_payment)
- **ุฃุฎุฑู** (other)

## ๐ ุงูุฃูุงู

- **Row Level Security (RLS)** ููุนู ุนูู ุฌููุน ุงูุฌุฏุงูู
- ุนุฒู ุงูุจูุงูุงุช ุญุณุจ `org_id`
- ุชุชุจุน ูู ุฃูุดุฃ ููู ุฃูุฑ ุงูุณูุฏ

## ๐ ุงูุชูุงุฑูุฑ

ูููู ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ูู:
- ุชูุงุฑูุฑ ุงูุชุญุตููุงุช
- ุชูุงุฑูุฑ ุงููุฏููุนุงุช
- ุชูุงุฑูุฑ ุงูุชุฏููุงุช ุงูููุฏูุฉ
- ุชูุงุฑูุฑ ุญุณุงุจุงุช ุงูุนููุงุก ูุงูููุฑุฏูู

## โ๏ธ ููุงุญุธุงุช ูููุฉ

1. **ุญุณุงุจุงุช GL**: ูุฌุจ ุฃู ุชููู ุญุณุงุจุงุช ุงูููุฏ ูุงูุจูู ููุฌูุฏุฉ ูู `gl_accounts` ูุน `subtype = 'CASH'` ุฃู `'BANK'`
2. **ุญุณุงุจุงุช ุงูุนููุงุก**: ูุฌุจ ุฃู ูููู ุญุณุงุจ `ACCOUNTS_RECEIVABLE` ููุฌูุฏ
3. **ุญุณุงุจุงุช ุงูููุฑุฏูู**: ูุฌุจ ุฃู ูููู ุญุณุงุจ `ACCOUNTS_PAYABLE` ููุฌูุฏ
4. **ุงูุฅูุฑุงุฑ**: ูุง ูููู ุฅูุบุงุก ุณูุฏ ููุฑุฑ - ูุฌุจ ุฅูุบุงุก ุงูููุฏ ุงููุญุงุณุจู ุฃููุงู

## ๐ ุงูุชูุงูู ูุน ุงููุญุงุณุจุฉ

ุนูุฏ ุฅูุฑุงุฑ ุงูุณูุฏุ ูุชู ุฅูุดุงุก ููุฏ ูุญุงุณุจู ุชููุงุฆูุงู:

### ุณูุฏ ุงููุจุถ:
```
ูุฏูู: ุญุณุงุจ ุงูููุฏ/ุงูุจูู (payment_account_id)
ุฏุงุฆู: ุญุณุงุจ ุงูุนููุงุก (ACCOUNTS_RECEIVABLE)
```

### ุณูุฏ ุงูุตุฑู:
```
ูุฏูู: ุญุณุงุจ ุงูููุฑุฏูู (ACCOUNTS_PAYABLE)
ุฏุงุฆู: ุญุณุงุจ ุงูููุฏ/ุงูุจูู (payment_account_id)
```

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู:
1. ุชุญูู ูู ุชูููุฐ ููู SQL
2. ุชุญูู ูู ูุฌูุฏ ุญุณุงุจุงุช GL ุงููุทููุจุฉ
3. ุชุญูู ูู ูุฌูุฏ ุนูุงูุงุช FK ุตุญูุญุฉ
4. ุฑุงุฌุน console ููุฃุฎุทุงุก

