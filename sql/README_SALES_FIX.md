# ุฅุตูุงุญ ุฌุฏุงูู ุงููุจูุนุงุช - Sales Tables Fix

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงูููู ูุตูุญ ุงููุดุงูู ูู ุฌุฏุงูู ุงููุจูุนุงุช ููุถูู ุงูุฌุฏุงูู ุงูููููุฏุฉ.

## ๐ง ุงููุดุงูู ุงูุชู ุชู ุฅุตูุงุญูุง

1. โ ุฅุถุงูุฉ ุนููุฏ `org_id` ูุฌุฏูู `sales_invoices` ุฅุฐุง ูู ููู ููุฌูุฏุงู
2. โ ุฅุฒุงูุฉ ุงูุงุนุชูุงุฏ ุนูู `name_ar` ูู ุงูุงุณุชุนูุงูุงุช (ุงูุนููุฏ ุบูุฑ ููุฌูุฏ ูู ุจุนุถ ุงูุฌุฏุงูู)
3. โ ุฅูุดุงุก ุฌุฏูู `sales_orders` ุฅุฐุง ูู ููู ููุฌูุฏุงู
4. โ ุฅูุดุงุก ุฌุฏูู `sales_order_lines` ุฅุฐุง ูู ููู ููุฌูุฏุงู
5. โ ุฅูุดุงุก ุฌุฏูู `customer_collections` ุฅุฐุง ูู ููู ููุฌูุฏุงู
6. โ ุฅุถุงูุฉ RLS Policies ููุฌุฏุงูู ุงูุฌุฏูุฏุฉ
7. โ ุฅุถุงูุฉ ุฏูุงู ูุชูููุฏ ุงูุฃุฑูุงู ุงูุชููุงุฆูุฉ

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุชูููุฐ ููู SQL ูู Supabase

1. ุงูุชุญ Supabase Dashboard
2. ุงุฐูุจ ุฅูู **SQL Editor**
3. ุงูุณุฎ ูุญุชูู ููู `sql/06_sales_tables_fix.sql`
4. ุงูุตู ูู SQL Editor
5. ุงุถุบุท **Run** ุฃู **Execute**

### 2. ุงูุชุญูู ูู ุงููุชุงุฆุฌ

ุจุนุฏ ุงูุชูููุฐุ ูุฌุจ ุฃู ุชุฑู:
- โ ุฑุณุงุฆู `NOTICE` ุชุคูุฏ ุฅุถุงูุฉ ุงูุฃุนูุฏุฉ/ุงูุฌุฏุงูู
- โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก

### 3. ุงูุชุญูู ูู ุงูุฌุฏุงูู

ููููู ุงูุชุญูู ูู ุงูุฌุฏุงูู ูู Supabase:
- `sales_invoices` - ูุฌุจ ุฃู ูุญุชูู ุนูู ุนููุฏ `org_id`
- `sales_orders` - ูุฌุจ ุฃู ูููู ููุฌูุฏุงู
- `sales_order_lines` - ูุฌุจ ุฃู ูููู ููุฌูุฏุงู
- `customer_collections` - ูุฌุจ ุฃู ูููู ููุฌูุฏุงู
- `customers` - ูุฏ ูุญุชูู ุนูู `name_ar` (ุงุฎุชูุงุฑู)
- `items` - ูุฏ ูุญุชูู ุนูู `name_ar` (ุงุฎุชูุงุฑู)

## โ๏ธ ููุงุญุธุงุช ูููุฉ

1. **ุงููุณุฎ ุงูุงุญุชูุงุทู**: ูููุตุญ ุจุนูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุจู ุงูุชูููุฐ
2. **ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ**: ุฅุฐุง ูุงู ูุฏูู ุจูุงูุงุช ูู `sales_invoices` ูุน `tenant_id`ุ ุณูุชู ูุณุฎูุง ุฅูู `org_id`
3. **RLS Policies**: ุชู ุฅุถุงูุฉ RLS policies ููุฌุฏุงูู ุงูุฌุฏูุฏุฉ - ุชุฃูุฏ ูู ุฃู `app.current_org_id` ูุนูู ุจุดูู ุตุญูุญ

## ๐ ุงูุชุญูู ูู ุงูุฅุตูุงุญุงุช

ุจุนุฏ ุชูููุฐ ุงููููุ ุฌุฑุจ:
1. ูุชุญ ุชูุงุฑูุฑ ุงููุจูุนุงุช (`/reports/sales`)
2. ูุฌุจ ุฃู ุชุนูู ุฌููุน ุงูุชูุงุฑูุฑ ุจุฏูู ุฃุฎุทุงุก
3. ูุฌุจ ุฃู ุชุธูุฑ ุงูุจูุงูุงุช ุจุดูู ุตุญูุญ

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู:
1. ุชุญูู ูู console ุงููุชุตูุญ ููุฃุฎุทุงุก
2. ุชุญูู ูู Supabase logs
3. ุชุฃูุฏ ูู ุฃู ุฌููุน ุงูุฌุฏุงูู ุชู ุฅูุดุงุคูุง ุจุดูู ุตุญูุญ


