# ๐ **ุฏููู ุงูุชูููุฐ ุงููุงูู - ูุฑุฏุฉ ุงูุจูุงู ERP**

## ๐ **ููุฎุต ุงููุธุงู ุงููุญุณูู**

ุชู ุฅูุดุงุก ูุธุงู ERP ูุชูุงูู ูู**ูุฑุฏุฉ ุงูุจูุงู ููุตูุงุนุงุช ุงูุจูุงุณุชูููุฉ** ูุน ุงูุชุตุญูุญุงุช ุงููุญุงุณุจูุฉ ุงููุทููุจุฉ:

### โ **ุงูุชุญุณููุงุช ุงูุฃุณุงุณูุฉ ุงููุทุจูุฉ:**
1. **ูุตู ุงูุฃููุฑููุฏ ุงููุนูู ุนู ุงูููุทุจูู**
2. **ุชุตุญูุญ ุชุฏูู ุงูุชูุงููู: RM โ WIP โ FG โ COGS**
3. **ุงูููุงุฏ ูุงูุฃุฌูุฑ ุชุฐูุจ ุฅูู WIP ูุจุงุดุฑุฉ (ุจุฏูุงู ูู P&L)**
4. **ูุธุงู AVCO ูุชูุงูู ูุน Process Costing**
5. **ุชุญููู ุดุงูู ููุงูุญุฑุงูุงุช (Variance Analysis)**

---

## ๐ **ุงููููุงุช ุงูููุณูููุฉ:**

### ๐๏ธ **1. ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงููุฎุทุท:**
- **`wardah_enhanced_coa.csv`** - ุดุฌุฑุฉ ุงูุญุณุงุจุงุช ุงููุญุณููุฉ (190 ุญุณุงุจ)
- **`wardah-migration-schema.sql`** - ุงููุฎุทุท ุงููุงูู ููุงุนุฏุฉ ุงูุจูุงูุงุช
- **`wardah-rls-policies.sql`** - ุณูุงุณุงุช ุงูุฃูุงู ูุชุนุฏุฏุฉ ุงููุณุชุฃุฌุฑูู
- **`wardah-avco-functions.sql`** - ุฏูุงู AVCO ูุงูุชุตููุน

### ๐บ๏ธ **2. ุฎุฑุงุฆุท ุงูุฃุญุฏุงุซ:**
- **`wardah_gl_mappings.csv`** - ุฎุฑุงุฆุท ุงูุฃุญุฏุงุซ ููุชุณุฌูู ุงูุชููุงุฆู (72 ุฎุฑูุทุฉ)

---

## ๐ง **ุฎุทูุงุช ุงูุชูููุฐ:**

### **ุงููุฑุญูุฉ 1: ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช**
```bash
# 1. ุฅูุดุงุก ูุดุฑูุน Supabase ุฌุฏูุฏ
# 2. ุชูููุฐ ุงููุฎุทุทุงุช ุจุงูุชุฑุชูุจ:

# ุฃ) ุงููุฎุทุท ุงูุฃุณุงุณู
psql -f wardah-migration-schema.sql

# ุจ) ุณูุงุณุงุช RLS
psql -f wardah-rls-policies.sql

# ุฌ) ุฏูุงู AVCO ูุงูุชุตููุน
psql -f wardah-avco-functions.sql
```

### **ุงููุฑุญูุฉ 2: ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ**
```sql
-- 1. ุงุณุชูุฑุงุฏ ุดุฌุฑุฉ ุงูุญุณุงุจุงุช
COPY gl_accounts FROM 'wardah_enhanced_coa.csv' WITH CSV HEADER;

-- 2. ุงุณุชูุฑุงุฏ ุฎุฑุงุฆุท ุงูุฃุญุฏุงุซ  
COPY gl_mappings FROM 'wardah_gl_mappings.csv' WITH CSV HEADER;
```

### **ุงููุฑุญูุฉ 3: ุฅุนุฏุงุฏ ุงูุชูููู ุงูุฃุณุงุณู**
```javascript
// config.json - ุชูููู ุงููุธุงู
{
  "TABLE_NAMES": {
    "organizations": "organizations",
    "gl_accounts": "gl_accounts", 
    "products": "products",
    "manufacturing_orders": "manufacturing_orders",
    "stock_moves": "stock_moves",
    "stock_quants": "stock_quants"
    // ... ุจุงูู ุงูุฌุฏุงูู
  },
  "AVCO_SETTINGS": {
    "precision": 6,
    "currency": "SAR",
    "allow_negative": false
  }
}
```

---

## ๐ญ **ุชุฏูู ุงูุนูููุงุช ุงููุญุงุณุจูุฉ:**

### **1๏ธโฃ ุงุณุชูุงู ุงูููุงุฏ ุงูุฎุงู:**
```sql
-- ุฎุฑูุทุฉ ุงูุญุฏุซ: purchase_receipt_ldpe
DR 131100 (ููุงุฏ ุฎุงู LDPE)
CR 210100 (ุงูุฏุงุฆููู)
-- ุงูุชุฃุซูุฑ: ุชุญุฏูุซ AVCO ูู stock_quants ุชููุงุฆูุงู
```

### **2๏ธโฃ ุตุฑู ุงูููุงุฏ ููุฅูุชุงุฌ:**
```sql
-- ุฎุฑูุทุฉ ุงูุญุฏุซ: material_issue_mixing
DR 134100 (WIP - ุงูุฎูุท) 
CR 131100 (ููุงุฏ ุฎุงู LDPE)
-- ุงูุชุฃุซูุฑ: ุชูููุฉ ุจู AVCO ุงูุญุงูู
```

### **3๏ธโฃ ุชุญููู ุงูุฃุฌูุฑ ุงููุจุงุดุฑุฉ:**
```sql  
-- ุฎุฑูุทุฉ ุงูุญุฏุซ: labor_charge_mixing
DR 134100 (WIP - ุงูุฎูุท)
CR 210201 (ุฑูุงุชุจ ูุณุชุญูุฉ)
```

### **4๏ธโฃ ุชุทุจูู ุงูุฃููุฑููุฏ:**
```sql
-- ุฎุฑูุทุฉ ุงูุญุฏุซ: overhead_applied_mixing  
DR 134100 (WIP - ุงูุฎูุท)
CR 514000 (ุฃููุฑููุฏ ููุทุจูู)
```

### **5๏ธโฃ ุงูุฃููุฑููุฏ ุงููุนูู (ูููุตู):**
```sql
-- ุฎุฑูุทุฉ ุงูุญุฏุซ: overhead_actual_power
DR 513100 (ุทุงูุฉ ูุนููุฉ)
CR 210302 (ูุฑุงูู ูุณุชุญูุฉ)
```

### **6๏ธโฃ ุฅุชูุงู ุงูุฅูุชุงุฌ:**
```sql
-- ุฎุฑูุทุฉ ุงูุญุฏุซ: production_complete_bags
DR 135100 (ุฃููุงุณ ุชุงูุฉ ุงูุตูุน)
CR 134500 (WIP - ุงูุชุนุจุฆุฉ)
-- ุงูุชุฃุซูุฑ: ุญุณุงุจ ุชูููุฉ ุงููุญุฏุฉ = (ููุงุฏ + ุฃุฌูุฑ + ุฃููุฑููุฏ) / ุงููููุฉ
```

### **7๏ธโฃ ุงูุจูุน ูุงูุดุญู:**
```sql
-- ุฅูุฑุงุฏุงุช
DR 110300 (ุงููุฏูููู)  
CR 410100 (ูุจูุนุงุช ูุญููุฉ)

-- COGS ุจู AVCO
DR 544000 (COGS - ุฃููุงุณ)
CR 135100 (ุฃููุงุณ ุชุงูุฉ ุงูุตูุน)
```

### **8๏ธโฃ ุฅููุงู ูุฑููุงุช ุงูุฃููุฑููุฏ (ููุงูุฉ ุงููุชุฑุฉ):**
```sql
-- ูุฑู ุงูุฅููุงู = ุงููุนูู - ุงูููุทุจูู
DR 593100 (ูุฑู ุฅููุงู ุฃููุฑููุฏ)
CR 514000 (ุฃููุฑููุฏ ููุทุจูู)
```

---

## ๐ฏ **ุงูุฏูุงู ุงูุฃุณุงุณูุฉ ููุงุณุชุฎุฏุงู:**

### **ุตุฑู ุงูููุงุฏ:**
```sql
SELECT issue_materials_to_mo(
    'mo_id_here',
    '[{"product_id": "...", "quantity": 100, "from_location_id": "..."}]'::jsonb
);
```

### **ุฅุชูุงู ุฃูุฑ ุงูุชุตููุน:**
```sql
SELECT complete_manufacturing_order('mo_id_here');
-- ุงูุนุงุฆุฏ: ุชูููุฉ ุงูููุงุฏุ ุงูุฃุฌูุฑุ ุงูุฃููุฑููุฏุ ุชูููุฉ ุงููุญุฏุฉ
```

### **ุชูููู ุงููุฎุฒูู ุงูุญุงูู:**
```sql
SELECT * FROM get_inventory_valuation('org_id_here');
-- ุงูุนุงุฆุฏ: ูููุงุชุ ูุชูุณุท ุงูุชูููุฉุ ุงููููุฉ ุงูุฅุฌูุงููุฉ
```

### **ุชุญููู WIP:**
```sql
SELECT * FROM get_wip_analysis('org_id_here'); 
-- ุงูุนุงุฆุฏ: ุฃูุงูุฑ ุงูุชุตููุนุ ุงูุชูุงูููุ ูุณุจุฉ ุงูุฅูุฌุงุฒ
```

---

## ๐ **ุงูุชูุงุฑูุฑ ุงููุชุงุญุฉ:**

### **1. ุชูุฑูุฑ ุชูููู ุงููุฎุฒูู:**
- **ุงููููุงุช ุงูุญุงููุฉ** ููู ููุชุฌ/ูููุน
- **ูุชูุณุท ุงูุชูููุฉ (AVCO)** ุงูุญุงูู
- **ุงููููุฉ ุงูุฅุฌูุงููุฉ** ูููุฎุฒูู

### **2. ุชุญููู WIP:**
- **ุฃูุงูุฑ ุงูุชุตููุน** ููุฏ ุงูุชุดุบูู  
- **ุชูุงููู ุงูููุงุฏ/ุงูุฃุฌูุฑ/ุงูุฃููุฑููุฏ** ููู ุฃูุฑ
- **ูุณุจุฉ ุงูุฅูุฌุงุฒ** ูุงูุชูููุฉ ุงููุชููุนุฉ

### **3. ุชุญููู ุงูุงูุญุฑุงูุงุช:**
- **ูุฑููุงุช ุงูุฃููุฑููุฏ** (ุฅููุงู/ุญุฌู)
- **ูุฑููุงุช ุงูููุงุฏ** (ุณุนุฑ/ุงุณุชููุงู) 
- **ูุฑููุงุช ุงูุฃุฌูุฑ** (ูุนุฏู/ููุงุกุฉ)

### **4. ุชูุฑูุฑ COGS:**
- **ุชูููุฉ ุงููุจูุนุงุช** ุญุณุจ ุงูููุชุฌ/ุงูุนููู/ุงููุชุฑุฉ
- **ุชุญููู ุงูุฑุจุญูุฉ** (ุฅูุฑุงุฏุงุช - COGS)

---

## ๐ **ุงูุฃูุงู ู RLS:**

### **ุงููุณุชููุงุช:**
- **Admin:** ูุงูู ุงูุตูุงุญูุงุช
- **Manager:** ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ
- **User:** ุฅุฏุฎุงู ุงููุนุงููุงุช ุงูููููุฉ

### **ุงูุนุฒู:**
- ูู ูุคุณุณุฉ ูุนุฒููุฉ ุชูุงูุงู ุนู ุงูุฃุฎุฑูุงุช
- ุงูุจูุงูุงุช ูููุชุฑุฉ ุชููุงุฆูุงู ุญุณุจ `org_id`

---

## โก **ููุงุท ุงูููุฉ ุงูุฃุณุงุณูุฉ:**

### **1. ุฏูุฉ ูุญุงุณุจูุฉ ุนุงููุฉ:**
- โ ูุตู ูุงุถุญ ุจูู ุงูุฃููุฑููุฏ ุงููุนูู ูุงูููุทุจูู
- โ ุชุฏูู ุตุญูุญ ููุชูุงููู ุนุจุฑ ุงููุฑุงุญู  
- โ ุญุณุงุจ COGS ุฏููู ุจู AVCO

### **2. ูุฑููุฉ ูู ุงูุชุดุบูู:**
- โ ุฏุนู ูุฑุงุญู ุฅูุชุงุฌ ูุชุนุฏุฏุฉ
- โ ูุนุงูุฌุฉ ุงูุณูุฑุงุจ ูุงููุฎููุงุช
- โ ุงููุนุงูุฌุฉ ุงูุฎุงุฑุฌูุฉ

### **3. ุชุญููู ุดุงูู:**
- โ ุงูุญุฑุงูุงุช ุงูุชูุงููู ุจุงูุชูุตูู
- โ ุชูููู WIP ูุญุธู
- โ ุฑุจุญูุฉ ุญุณุจ ุงูููุชุฌ

### **4. ูุงุจููุฉ ุงูุชูุณุน:**
- โ Multi-tenant architecture  
- โ ุฎุฑุงุฆุท ุฃุญุฏุงุซ ูุงุจูุฉ ููุชุฎุตูุต
- โ Realtime updates

---

## ๐ **ุงูุฎุทูุงุช ุงูุชุงููุฉ:**

1. **ุฅุนุฏุงุฏ ุงูุจูุฆุฉ:** ุชูููุฐ ุงููููุงุช ูู Supabase
2. **ุงุฎุชุจุงุฑ ุงูุณููุงุฑูู:** ุชุฌุฑุจุฉ ุฏูุฑุฉ ูุงููุฉ ูู ุงูุดุฑุงุก ููุจูุน  
3. **ุงูุชุฎุตูุต:** ุชุนุฏูู ุฎุฑุงุฆุท ุงูุฃุญุฏุงุซ ุญุณุจ ุงูุญุงุฌุฉ
4. **ุงูุชุฏุฑูุจ:** ุชุฏุฑูุจ ุงููุณุชุฎุฏููู ุนูู ุงููุธุงู
5. **ุงูุฅูุชุงุฌ:** ูุดุฑ ุงููุธุงู ููุงุณุชุฎุฏุงู ุงููุนูู

---

## ๐ **ุงูุฏุนู ุงูููู:**

ูููุณุงุนุฏุฉ ูู ุงูุชูููุฐ ุฃู ุงูุชุฎุตูุตุ ูุฑุฌู ุงูุฑุฌูุน ุฅูู:
- **ุงููุซุงุฆู ุงููุฑููุฉ** ูู ุงููููุงุช
- **ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู** ูู ููู ุฏูุงู AVCO
- **ุณูุฑูุจุชุงุช ุงูุงุฎุชุจุงุฑ** ุงููุถููุฉ

**๐ ุงููุธุงู ุฌุงูุฒ ููุฅูุชุงุฌ ูุงูุงุณุชุฎุฏุงู ุงูููุฑู!**