# ๐ฆ ุฅุนุฏุงุฏ Storage Bucket ูููุฑููุงุช

## ุงููุดููุฉ
```
Error uploading attachment: StorageApiError: Bucket not found
```

ูุฐุง ุงูุฎุทุฃ ูุญุฏุซ ูุฃู `documents` bucket ุบูุฑ ููุฌูุฏ ูู Supabase Storage.

---

## โ ุงูุญู: ุฅูุดุงุก Documents Bucket

### ุงูุทุฑููุฉ 1: ุนุจุฑ Supabase Dashboard (ุงูุฃุณูู)

1. **ุงุฐูุจ ุฅูู Supabase Dashboard**
   - URL: https://app.supabase.com
   - ุงูุชุญ ูุดุฑูุนู

2. **ุงูุชูู ุฅูู Storage**
   - ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ: ุงุฎุชุฑ **Storage**
   - ุซู ุงุถุบุท **Create bucket**

3. **ุฃูุดุฆ Bucket ุฌุฏูุฏ**
   ```
   Bucket name:    documents
   Public:         OFF (Private) โ๏ธ ููู!
   File size limit: 50 MB
   Allowed MIME types: (ุงุชุฑู ูุงุฑุบ ููุณูุงุญ ุจูู ุงูุฃููุงุน)
   ```

4. **ุงุถุบุท Save**

---

### ุงูุทุฑููุฉ 2: ุนุจุฑ Supabase CLI

```bash
# ุชุฃูุฏ ุฃูู ูุณุฌู ุงูุฏุฎูู
supabase login

# ุฃูุดุฆ bucket
supabase storage create documents --private

# ุชุญูู ูู ุงูุฅูุดุงุก
supabase storage list
```

---

### ุงูุทุฑููุฉ 3: ุนุจุฑ SQL Editor

ุงุฐูุจ ุฅูู **SQL Editor** ูู Supabase ููู ุจุชุดุบูู:

```sql
-- ุชูููุฐ ุณูุฑูุจุช Storage
\i sql/03_create_storage_buckets.sql
```

ุฃู ุงูุณุฎ ุงููุญุชูู ูุฏููุงู ูู `sql/03_create_storage_buckets.sql`.

---

## ๐ Storage Policies (ุชููุงุฆู)

ุงูุณูุฑูุจุช `sql/03_create_storage_buckets.sql` ูููุดุฆ ุงูุณูุงุณุงุช ุงูุชุงููุฉ ุชููุงุฆูุงู:

- โ **Upload**: ุงูุณูุงุญ ูููุณุชุฎุฏููู ุงููุณุฌููู ุจุฑูุน ูููุงุช
- โ **Read**: ุงูุณูุงุญ ุจูุฑุงุกุฉ ูููุงุช ุงููุคุณุณุฉ ุงูุฎุงุตุฉ ุจูู
- โ **Update**: ุงูุณูุงุญ ุจุชุญุฏูุซ ุงููููุงุช
- โ **Delete**: ุงูุณูุงุญ ุจุญุฐู ุงููููุงุช

---

## ๐งช ุงูุชุญูู ูู ุงูุชุซุจูุช

ุจุนุฏ ุฅูุดุงุก ุงูุจucketุ ุฌุฑูุจ:

1. ุงุฐูุจ ุฅูู **ุงููููุฏ ุงูููููุฉ** ูู ุงูุชุทุจูู
2. ุงูุชุญ ููุฏ ููุฌูุฏ
3. ุญุงูู ุฑูุน ููู PDF ุฃู ุตูุฑุฉ
4. ูุฌุจ ุฃู ูุนูู ุจูุฌุงุญ! โ

---

## ๐ ุฃููุงุน ุงููููุงุช ุงููุฏุนููุฉ

- **ุงููุณุชูุฏุงุช**: PDF, DOC, DOCX, XLS, XLSX, TXT, CSV
- **ุงูุตูุฑ**: JPG, JPEG, PNG, GIF, WEBP
- **ุงูุญุฏ ุงูุฃูุตู ููุญุฌู**: 50 MB ููู ููู

---

## โ๏ธ ููุงุญุธุงุช ูุงูุฉ

1. **Private Bucket**: ุชุฃูุฏ ุฃู ุงูุจucket **ุบูุฑ ุนุงู** ูุญูุงูุฉ ุงูุจูุงูุงุช
2. **RLS Policies**: ุงูุณูุงุณุงุช ุถุฑูุฑูุฉ ููุชุญูู ุจุงููุตูู
3. **File Paths**: ุงููููุงุช ุชูุญูุธ ูู ูุณุงุฑ: `journal-attachments/{entry_id}/{timestamp}.{ext}`

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฎุทุฃ: "Bucket not found"
- โ ุชุฃูุฏ ูู ุงุณู ุงูุจucket: `documents` (ุจุงูุฅูุฌููุฒู ุจุฏูู ูุณุงูุงุช)
- โ ุชุฃูุฏ ุฃูู ุชู ุฅูุดุงุคู ูู ููุณ ูุดุฑูุน Supabase

### ุฎุทุฃ: "Permission denied"
- โ ุชุฃูุฏ ูู ุชุทุจูู Storage Policies ูู ุงูุณูุฑูุจุช
- โ ุชุฃูุฏ ูู ุชุณุฌูู ุงูุฏุฎูู ุจูุณุชุฎุฏู authenticated

### ุฎุทุฃ: "File too large"
- โ ุงูุญุฏ ุงูุฃูุตู 50 MB
- โ ูู ุจุฑูุน ูููุงุช ุฃุตุบุฑ ุฃู ุฒูุงุฏุฉ ุงูุญุฏ ูู bucket settings

---

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ูุดุงูู:
1. ุฑุงุฌุน Supabase logs ูู Dashboard
2. ุชุญูู ูู console errors ูู ุงููุชุตูุญ
3. ุชุฃูุฏ ูู ุชุทุจูู ุฌููุน SQL scripts ุจุชุฑุชูุจ ุตุญูุญ

---

**ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ**: 2025-01-17

